import{d as B,o as u,c as _,a as n,t as C,R as M,j as V,N as q,g as U,b as f,e as x,w as l,k as t,l as m,r as S,u as g,F as T,a7 as H,a8 as J,a9 as K,a1 as P,p as O,f as W,m as N,aa as Q}from"./index-BKc2JyK5.js";import{g as X,b as A,t as Y}from"./random-D7cEhbNa.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"action-card-title"},ee=B({__name:"ActionCard",props:{setRef:{},title:{}},setup(p){return(d,y)=>(u(),_("div",{class:"action-card",ref:d.setRef},[n("div",Z,C(d.title),1),M(d.$slots,"default",{},void 0,!0)],512))}}),F=G(ee,[["__scopeId","data-v-c26a3ca7"]]),I=[2,3,4,6,8,10,12,20,100],te=p=>(O("data-v-5e6fd006"),p=p(),W(),p),oe={class:"card-row"},le={class:"card-row"},ne={class:"card-row"},se={class:"footer"},ae={class:"footer-hint"},ie=te(()=>n("div",null,"可横向滚动",-1)),ue=B({__name:"DiyActionCard",props:{setRef:{},defaultGroupCount:{},defaultOptions:{}},emits:["roll","scroll"],setup(p,{emit:d}){const y=p,D=d,{defaultGroupCount:h=5,defaultOptions:b={dice:6,times:3}}=y,a=V(h),i=q(b),k=V(3);function w(v){k.value=(k.value+v+I.length)%I.length}function r(){const v=X(a.value,i).text,e={title:A("",a.value,i),content:v,time:new Date().toLocaleTimeString(),timestamp:Date.now()};D("roll",e)}const $=U(()=>A("",a.value,i));return(v,e)=>{const s=f("el-input"),c=f("el-button"),L=f("el-button-group"),R=f("el-form-item"),j=f("el-radio-button"),z=f("el-radio-group"),E=f("el-form");return u(),x(F,{class:"diy-card-container",title:`自定义投掷（当前：${$.value}）`,setRef:v.setRef},{default:l(()=>[t(E,{"label-width":"auto",onSubmit:P(r,["prevent"])},{default:l(()=>[t(R,{label:"几组"},{default:l(()=>[n("div",oe,[t(s,{class:"col-1",type:"number",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),min:1},null,8,["modelValue"]),t(L,{modelValue:a.value,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value=o)},{default:l(()=>[t(c,{onClick:e[1]||(e[1]=o=>a.value=1)},{default:l(()=>[m(" 1 ")]),_:1}),t(c,{onClick:e[2]||(e[2]=o=>a.value=5)},{default:l(()=>[m(" 5 ")]),_:1}),t(c,{onClick:e[3]||(e[3]=o=>a.value-=1)},{default:l(()=>[m(" -1 ")]),_:1}),t(c,{onClick:e[4]||(e[4]=o=>a.value+=1)},{default:l(()=>[m(" +1 ")]),_:1})]),_:1},8,["modelValue"])])]),_:1}),t(R,{label:"D"},{default:l(()=>[n("div",le,[t(c,{onClick:e[6]||(e[6]=o=>w(-3))},{default:l(()=>[m(" ← ")]),_:1}),t(z,{modelValue:i.dice,"onUpdate:modelValue":e[7]||(e[7]=o=>i.dice=o)},{default:l(()=>[(u(!0),_(T,null,S(g(I).slice(k.value,k.value+3),o=>(u(),x(j,{key:o,label:`D${o}`,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(c,{onClick:e[8]||(e[8]=o=>w(3))},{default:l(()=>[m(" → ")]),_:1})])]),_:1}),t(R,{label:"几颗"},{default:l(()=>[n("div",ne,[t(s,{type:"number",modelValue:i.times,"onUpdate:modelValue":e[10]||(e[10]=o=>i.times=o),min:1},{append:l(()=>[t(c,{icon:g(H),onClick:e[9]||(e[9]=o=>i.times=1)},null,8,["icon"])]),_:1},8,["modelValue"]),m(" 选 "),t(s,{type:"number",placeholder:"几颗最 +大/-小 的",modelValue:i.pick,"onUpdate:modelValue":e[11]||(e[11]=o=>i.pick=Number(o))},null,8,["modelValue"])])]),_:1}),t(R,{label:"加值"},{default:l(()=>[t(s,{type:"number",modelValue:i.plus,"onUpdate:modelValue":e[12]||(e[12]=o=>i.plus=o)},null,8,["modelValue"])]),_:1}),n("div",se,[t(c,{type:"default",size:"large",nativeType:"submit"},{default:l(()=>[m(" 投掷 ")]),_:1}),n("div",ae,[t(c,{type:"default",onClick:e[13]||(e[13]=()=>D("scroll",-1)),icon:g(J),circle:""},null,8,["icon"]),ie,t(c,{type:"default",onClick:e[14]||(e[14]=()=>D("scroll",1)),icon:g(K),circle:""},null,8,["icon"])])])]),_:1})]),_:1},8,["title","setRef"])}}}),de=G(ue,[["__scopeId","data-v-5e6fd006"]]),re=p=>(O("data-v-d48f76b6"),p=p(),W(),p),ce={class:"container"},pe={class:"result-section"},_e=re(()=>n("div",{class:"result-section-title"},"投掷结果：",-1)),me={class:"result-cards"},fe={key:0,class:"result-card"},ve={class:"result-card-title"},Ce={class:"result-card-content"},ye={key:0,class:"result-section-title"},be={class:"result-cards"},ke={class:"result-card-time"},$e={class:"result-card-title"},Ve={class:"result-card-content"},ge={class:"simple-dice-container"},De=8,he=B({__name:"RollTool",props:{hideDiy:{type:Boolean}},setup(p){const d=V([]),y=U(()=>d.value[0]);function D(r){const $=Y(r);d.value=[{title:`D${r} = ${$}`,time:new Date().toLocaleTimeString(),timestamp:Date.now()},...d.value]}const h=V([{}]),b=V(null),a=V([]),i=U(()=>{var r;return((r=a.value[0])==null?void 0:r.offsetWidth)||0});function k(r){d.value=[r,...d.value]}function w(r){b.value&&b.value.scrollTo({left:b.value.scrollLeft+r*(i.value+De),behavior:"smooth"})}return(r,$)=>{const v=f("el-button"),e=f("el-icon");return u(),_("div",ce,[n("div",pe,[_e,n("div",me,[y.value?(u(),_("div",fe,[n("div",ve,C(y.value.title),1),n("div",Ce,C(y.value.content),1)])):N("",!0)]),d.value.length>1?(u(),_("div",ye," 历史投掷结果： ")):N("",!0),n("div",be,[(u(!0),_(T,null,S(d.value.slice(1),s=>(u(),_("div",{class:"result-card",key:s.timestamp},[n("div",ke,C(s.time),1),n("div",$e,C(s.title),1),n("div",Ve,C(s.content),1)]))),128))])]),t(F,{title:"简单投掷（点击即骰）"},{default:l(()=>[n("div",ge,[(u(!0),_(T,null,S(g(I),s=>(u(),_("div",{key:s},[t(v,{onClick:c=>D(s)},{default:l(()=>[m(" D"+C(s),1)]),_:2},1032,["onClick"])]))),128))])]),_:1}),r.hideDiy?N("",!0):(u(),_("div",{key:0,class:"diy-container",ref_key:"diyContainer",ref:b},[(u(!0),_(T,null,S(h.value,(s,c)=>(u(),x(de,{key:c,setRef:L=>a.value.push(L),defaultGroupCount:s.groupCount,defaultOptions:s.options,onRoll:k,onScroll:w},null,8,["setRef","defaultGroupCount","defaultOptions"]))),128)),n("div",{class:"add-diy-button",onClick:$[0]||($[0]=s=>h.value.push({}))},[t(e,null,{default:l(()=>[t(g(Q))]),_:1})])],512))])}}}),Te=G(he,[["__scopeId","data-v-d48f76b6"]]);export{Te as R};
