function M(t){for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t}function $(t,n=1){return Array.from({length:n}).reduce(e=>{const r=Math.floor(Math.random()*t)+1;return e+r},0)}function p(t,n){const e=n.toString().length,r=t.toString();return r+Array.from({length:e-r.length}).map(o=>" ").join("")}function x(t){const n={dice:Number(t.dice),times:Number(t.times),pick:Number(t.pick||t.times),plus:Number(t.plus??0),align:t.align},{dice:e,times:r,pick:o=r,plus:c=0,align:i=!0}=n,u=o?Math.min(Math.abs(o),r):r,l=Array.from({length:r}).map(()=>Math.floor(Math.random()*e)+1),d=r-u,m=[...l],f=[];for(let s=0;s<d;s++){const h=m.indexOf(Math[o>0?"min":"max"](...l));f.push(...m.splice(h,1))}const a=m.reduce((s,h)=>s+h,c),g=e*u+c,b=[`${i?p(a,g):a} =`,d?`(${l.map(s=>`${i?p(s,e):s}`).join(",")})`:"",m.join(" + "),c?`(+ ${c})`:""].filter(s=>s).join(" ");return{result:a,text:b,detail:l,detailUsed:m,detailRemoved:f}}function j(t="",n,e){const r={dice:Number(e.dice),times:Number(e.times),pick:Number(e.pick),plus:Number(e.plus??0)},{times:o,dice:c,pick:i,plus:u}=r;return[t?`${t}的`:"",`${n}次`,[`${o}d`,c,i?`p${i}`:"",u?` + ${u}`:""].join("")].filter(l=>l).join(" ")}function D(t,n,e){const r=Array.from({length:t}).map(()=>x(n)),{sort:o="desc"}=e||{};return o&&r.sort((i,u)=>o==="asc"?i.result-u.result:u.result-i.result),{text:r.map(i=>i.text).join(`
`),details:r}}export{x as a,j as b,D as g,M as s,$ as t};
